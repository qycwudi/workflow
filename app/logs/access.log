2024-12-02T19:51:09.445+08:00	 info 	started rest server on :%!s(MISSING)	caller=utils/log.go:10
2024-12-02T19:51:09.445+08:00	 info 	init role server success	caller=rulego/rule_server.go:34
2024-12-02T19:51:09.445+08:00	 info 	init role server load api	caller=rulego/rule_server.go:36
2024-12-02T19:51:09.461+08:00	 info 	sql query: select `id`,`workspace_id`,`api_id`,`api_name`,`api_desc`,`dsl`,`status` from `api` where `status` = 'ON' 	span=35611aa9af9d4583	duration=4.2ms	caller=sqlx/stmt.go:274	trace=967ceb6c6a09fad0677acd892eed99a4
2024-12-02T19:51:09.461+08:00	 info 	init role server load api complete : 0	caller=rulego/rule_server.go:46
2024-12-02T19:51:25.182+08:00	 info 	sql query: select `module_id`,`module_name`,`module_type`,`module_config`,`module_index` from `module`	span=32c65893dbd1747c	duration=9.4ms	caller=sqlx/stmt.go:274	trace=a564cf339d4b5bd15109ee2bc5e6e965
2024-12-02T19:51:25.182+08:00	 info 	[HTTP]  200  -  POST  /workflow/module/list - 127.0.0.1:65396 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	caller=handler/loghandler.go:147	trace=a564cf339d4b5bd15109ee2bc5e6e965	span=e36787806b952d08	duration=11.4ms
2024-12-02T19:51:26.990+08:00	 info 	sql query: SELECT count(*) FROM `workspace` WHERE is_delete = 0 AND `workspace_type` = 'workflow'	duration=27.4ms	caller=sqlx/stmt.go:274	trace=1769a44d5dfd6f86609b44ce34418f95	span=cbe456ffd8e1c256
2024-12-02T19:51:26.993+08:00	 info 	sql query: SELECT `id`,`workspace_id`,`workspace_name`,`workspace_desc`,`workspace_type`,`workspace_icon`,`canvas_config`,`configuration`,`additionalInfo`,`create_time`,`update_time`,`is_delete` FROM `workspace` WHERE is_delete = 0 AND `workspace_type` = 'workflow' order by id desc LIMIT 0, 12	duration=2.9ms	caller=sqlx/stmt.go:274	trace=1769a44d5dfd6f86609b44ce34418f95	span=8ee5573892acc53d
2024-12-02T19:51:26.995+08:00	 info 	sql query: select `id`,`tag_name`,`is_delete`,`create_time`,`update_time` from `workspace_tag` order by id desc	duration=30.2ms	caller=sqlx/stmt.go:274	trace=0526dd2c17778e05c1e526159a02a591	span=e0f043c458cad860
2024-12-02T19:51:26.995+08:00	 info 	[HTTP]  200  -  POST  /workflow/tag/list - 127.0.0.1:65414 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	trace=0526dd2c17778e05c1e526159a02a591	span=62d195ef6b8d8982	duration=31.0ms	caller=handler/loghandler.go:147
2024-12-02T19:51:26.998+08:00	 info 	sql query: select a.id as id, a.tag_id as tag_id,a.workspace_id as workspace_id,b.tag_name as tag_name from `workspace_tag_mapping` as a join `workspace_tag` as b on  a.tag_id = b.id where a.`workspace_id` in ('ct4qi1t3sjtp5jbouq0g', 'ct1i8ud3sjtg3kkhmvq0')	duration=4.2ms	caller=sqlx/stmt.go:274	trace=1769a44d5dfd6f86609b44ce34418f95	span=7d002adb14aa8da4
2024-12-02T19:51:26.998+08:00	 info 	[HTTP]  200  -  POST  /workflow/workspace/list - 127.0.0.1:65411 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	caller=handler/loghandler.go:147	trace=1769a44d5dfd6f86609b44ce34418f95	span=55a446571d45a375	duration=36.5ms
2024-12-02T19:51:27.854+08:00	 info 	sql query: select `id`,`workspace_id`,`draft`,`create_at`,`update_at`,`create_by`,`update_by` from `canvas` where `workspace_id` = 'ct1i8ud3sjtg3kkhmvq0' limit 1	trace=6022667b98f9cac6a048bd8708125c01	span=3a3e46c514ed2235	duration=6.5ms	caller=sqlx/stmt.go:274
2024-12-02T19:51:27.855+08:00	 info 	[HTTP]  200  -  POST  /workflow/canvas/detail - 127.0.0.1:65426 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	span=6fa27c777de9d4fa	duration=7.8ms	caller=handler/loghandler.go:147	trace=6022667b98f9cac6a048bd8708125c01
2024-12-02T19:51:27.930+08:00	 info 	sql query: select `module_id`,`module_name`,`module_type`,`module_config`,`module_index` from `module`	duration=0.9ms	caller=sqlx/stmt.go:274	trace=bd161634dc067aac6b0e7b64fd7a36fd	span=8661b214aa91a08a
2024-12-02T19:51:27.930+08:00	 info 	[HTTP]  200  -  POST  /workflow/module/list - 127.0.0.1:65429 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	trace=bd161634dc067aac6b0e7b64fd7a36fd	span=2d2b6118d51244ca	duration=1.3ms	caller=handler/loghandler.go:147
2024-12-02T19:52:35.423+08:00	 info 	sql query: select `id`,`tag_name`,`is_delete`,`create_time`,`update_time` from `workspace_tag` order by id desc	duration=25.7ms	caller=sqlx/stmt.go:274	trace=ceadf5f6cc94c8176841a9a0ae43cc17	span=5e8645d3fbe3b6f0
2024-12-02T19:52:35.424+08:00	 info 	[HTTP]  200  -  POST  /workflow/tag/list - 127.0.0.1:49186 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	caller=handler/loghandler.go:147	trace=ceadf5f6cc94c8176841a9a0ae43cc17	span=25080f5899658c62	duration=26.5ms
2024-12-02T19:52:35.424+08:00	 info 	sql query: SELECT count(*) FROM `workspace` WHERE is_delete = 0 AND `workspace_type` = 'workflow'	span=1192428e041c1d37	duration=28.2ms	caller=sqlx/stmt.go:274	trace=cdc821d3f063a1156a691980aa77e723
2024-12-02T19:52:35.426+08:00	 info 	sql query: SELECT `id`,`workspace_id`,`workspace_name`,`workspace_desc`,`workspace_type`,`workspace_icon`,`canvas_config`,`configuration`,`additionalInfo`,`create_time`,`update_time`,`is_delete` FROM `workspace` WHERE is_delete = 0 AND `workspace_type` = 'workflow' order by id desc LIMIT 0, 12	trace=cdc821d3f063a1156a691980aa77e723	span=78d92628d45a3208	duration=1.5ms	caller=sqlx/stmt.go:274
2024-12-02T19:52:35.429+08:00	 info 	sql query: select a.id as id, a.tag_id as tag_id,a.workspace_id as workspace_id,b.tag_name as tag_name from `workspace_tag_mapping` as a join `workspace_tag` as b on  a.tag_id = b.id where a.`workspace_id` in ('ct4qi1t3sjtp5jbouq0g', 'ct1i8ud3sjtg3kkhmvq0')	duration=3.1ms	caller=sqlx/stmt.go:274	trace=cdc821d3f063a1156a691980aa77e723	span=24c461add32cbac8
2024-12-02T19:52:35.430+08:00	 info 	[HTTP]  200  -  POST  /workflow/workspace/list - 127.0.0.1:49184 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	duration=34.0ms	caller=handler/loghandler.go:147	trace=cdc821d3f063a1156a691980aa77e723	span=27da529220772a42
2024-12-02T19:52:36.349+08:00	 info 	sql query: select `id`,`workspace_id`,`draft`,`create_at`,`update_at`,`create_by`,`update_by` from `canvas` where `workspace_id` = 'ct1i8ud3sjtg3kkhmvq0' limit 1	duration=3.1ms	caller=sqlx/stmt.go:274	trace=832437f4316a8d681235eceb98fc1d5a	span=a7471f31093ceb90
2024-12-02T19:52:36.350+08:00	 info 	[HTTP]  200  -  POST  /workflow/canvas/detail - 127.0.0.1:49197 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	duration=4.3ms	caller=handler/loghandler.go:147	trace=832437f4316a8d681235eceb98fc1d5a	span=271af5e37f0f2198
2024-12-02T19:52:36.423+08:00	 info 	sql query: select `module_id`,`module_name`,`module_type`,`module_config`,`module_index` from `module`	duration=7.0ms	caller=sqlx/stmt.go:274	trace=1dcb6bc586ebafe3b3d19c2d5a3675e2	span=ca11830fec8f23ac
2024-12-02T19:52:36.424+08:00	 info 	[HTTP]  200  -  POST  /workflow/module/list - 127.0.0.1:49200 - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36	duration=7.6ms	caller=handler/loghandler.go:147	trace=1dcb6bc586ebafe3b3d19c2d5a3675e2	span=ebaf34807bd28056
2024-12-18T10:32:58.335+08:00	[34;1m info [0;22m	started rest server on :8889	caller=utils/log.go:10
2024-12-18T10:32:58.335+08:00	[34;1m info [0;22m	init role server success	caller=rulego/rule_server.go:83
2024-12-18T10:32:58.335+08:00	[34;1m info [0;22m	init role server load api	caller=rulego/rule_server.go:85
2024-12-18T10:32:58.590+08:00	[34;1m info [0;22m	sql query: select `id`,`workspace_id`,`api_id`,`api_name`,`api_desc`,`dsl`,`status`,`create_time`,`update_time` from `api` where `status` = 'ON' 	duration=62.9ms	caller=sqlx/stmt.go:274	trace=b9a43bf05a5d811f037d921dd095f057	span=1935e803033152d5
2024-12-18T10:32:58.590+08:00	[34;1m info [0;22m	load api id:ctdd8m53sjtmnsd4svqg,name:sb1	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load ctdd8m53sjtmnsd4svqg role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load api id:ctdd8tl3sjtmnsd4svr0,name:sb2	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load ctdd8tl3sjtmnsd4svr0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load api id:ctddafd3sjtmte5cath0,name:sb3	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load ctddafd3sjtmte5cath0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load api id:ctdder53sjtn9c6t20j0,name:ÂèçÂèçÂ§çÂ§ç	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load ctdder53sjtn9c6t20j0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load api id:ctdq5bj93hoh5bghs3sg,name:wyl-api	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load ctdq5bj93hoh5bghs3sg role chain success,json:{"metadata": {"nodes": [{"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}, {"id": "start-844e5a1f-89bb-4d98-895b-0e9bd0d34003", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 1240, "Indexes": null}}, {"id": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "return { msg: msg, metadata: metadata, msgType: msgType };"}}], "connections": [{"toId": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b", "type": "Success", "fromId": "start-844e5a1f-89bb-4d98-895b-0e9bd0d34003"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.592+08:00	[34;1m info [0;22m	load api id:ctfvtb2flvkm3l6cbsh0,name:1111	caller=rulego/rule_server.go:92
2024-12-18T10:32:58.593+08:00	[34;1m info [0;22m	load ctfvtb2flvkm3l6cbsh0 role chain success,json:{"metadata": {"nodes": [{"id": "start-0fdcf3ed-24f9-45b9-9852-328bf59dfa84", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\n  \\\"list\\\": [\\n    {\\n      \\\"name\\\": \\\"test1\\\",\\n      \\\"age\\\": 18\\n    },\\n    {\\n      \\\"name\\\": \\\"test2\\\",\\n      \\\"age\\\": 13\\n    },\\n    {\\n      \\\"name\\\": \\\"test3\\\",\\n      \\\"age\\\": 19\\n    },\\n    {\\n      \\\"name\\\": \\\"test4\\\",\\n      \\\"age\\\": 29\\n    },\\n    {\\n      \\\"name\\\": \\\"test5\\\",\\n      \\\"age\\\": 26\\n    },\\n    {\\n      \\\"name\\\": \\\"test6\\\",\\n      \\\"age\\\": 23\\n    }\\n  ]\\n}\"}", "Str": "", "Type": 5, "Index": 1483, "Indexes": null}}, {"id": "for-d96dd814-7702-4a38-99d4-730a2391cbf7", "name": "Ëø≠‰ª£", "type": "for", "configuration": {"do": "jsTransform-cf2a0cc9-8cf4-40c3-a5c5-c7dd0a1dbbcf", "mode": 1, "range": "msg.list"}}, {"id": "jsTransform-cf2a0cc9-8cf4-40c3-a5c5-c7dd0a1dbbcf", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "msg.name = msg.name + '-Ëø≠‰ª£'\n  msg.age = msg.age + 2\n  return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "const aggregatedData = {\n    age: 0,\n    names: [],\n    count: 0,\n  };\n\n  // ÈÅçÂéÜ msg Êï∞ÁªÑ\n  msg.forEach((item) => {\n    const data = item // Ëé∑ÂèñÂÖ∑‰ΩìÁöÑÊï∞ÊçÆ\n\n    // ËÅöÂêàÂπ¥ÈæÑ\n    aggregatedData.age += data.age;\n\n    // Êî∂ÈõÜÂêçÂ≠ó\n    aggregatedData.names.push(data.name);\n\n    // ËÆ°Êï∞\n    aggregatedData.count++;\n  });\n\n  // ËÆ°ÁÆóÂπ≥ÂùáÂπ¥ÈæÑ\n  const averageAge =\n    aggregatedData.count > 0 ? aggregatedData.age / aggregatedData.count : 0;\n\n  const resultMsg = {\n    original: msg,\n    averageAge: averageAge,\n    names: aggregatedData.names,\n    totalCount: aggregatedData.count,\n  };\n  return { msg: resultMsg, metadata: metadata, msgType: msgType };"}}, {"id": "end-00cda001-3a81-45e7-95c4-d654649370c1", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "for-d96dd814-7702-4a38-99d4-730a2391cbf7", "type": "Success", "fromId": "start-0fdcf3ed-24f9-45b9-9852-328bf59dfa84"}, {"toId": "", "type": "", "fromId": ""}, {"toId": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f", "type": "Success", "fromId": "for-d96dd814-7702-4a38-99d4-730a2391cbf7"}, {"toId": "end-00cda001-3a81-45e7-95c4-d654649370c1", "type": "Success", "fromId": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f"}], "firstNodeIndex": 0}, "ruleChain": {"id": "ctfu27r93hom0rlu5bqg"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:32:58.593+08:00	[34;1m info [0;22m	init role server load api complete : 6	caller=rulego/rule_server.go:95
2024-12-18T10:32:58.593+08:00	[34;1m info [0;22m	init mysql lock	caller=locks/locks.go:30
2024-12-18T10:32:58.593+08:00	[34;1m info [0;22m	initialize servicecheck	caller=corn/scheduler.go:20
2024-12-18T10:32:58.593+08:00	[34;1m info [0;22m	initialize servicecheck	caller=corn/scheduler.go:30
2024-12-18T10:32:58.635+08:00	[34;1m info [0;22m	sql query: SELECT `id`,`type`,`config`,`switch`,`hash`,`status`,`create_time`,`update_time`,`name` FROM `datasource` WHERE switch = 1	span=660558f0a4e105c1	duration=41.7ms	caller=sqlx/stmt.go:274	trace=8dd1c7d3ded7cf7e15b511bd795328ca
2024-12-18T10:32:58.923+08:00	[34;1m info [0;22m	datasource init: &{Id:25 Type:mysql Config:{"host": "10.99.43.9", "port": 3306, "user": "root", "database": "workflow", "password": "Root@123"} Switch:1 Hash:663059dff2add3ddc458f2a668dd5c9a Status:connected CreateTime:2024-12-17 18:46:01 +0800 CST UpdateTime:2024-12-17 18:46:01 +0800 CST Name:test-1}	caller=datasource/datasouce.go:45
2024-12-18T10:32:58.968+08:00	[34;1m info [0;22m	sql exec: update `datasource` set status = 'connected' where id = 25	duration=45.2ms	caller=sqlx/stmt.go:274	trace=5ed3311e34ec0f9027ad146c2b6cb2a6	span=e12a0af9bd131f93
2024-12-18T10:32:58.968+08:00	[34;1m info [0;22m	datasource init success: 1, failed: 0	caller=datasource/datasouce.go:67
2024-12-18T10:33:01.811+08:00	[34;1m info [0;22m	Got signal 2, shutting down...	caller=proc/shutdown.go:58
2024-12-18T10:40:23.867+08:00	[34;1m info [0;22m	started rest server on :8889	caller=utils/log.go:10
2024-12-18T10:40:23.867+08:00	[34;1m info [0;22m	init role server success	caller=rulego/rule_server.go:83
2024-12-18T10:40:23.867+08:00	[34;1m info [0;22m	init role server load api	caller=rulego/rule_server.go:85
2024-12-18T10:40:24.037+08:00	[34;1m info [0;22m	sql query: select `id`,`workspace_id`,`api_id`,`api_name`,`api_desc`,`dsl`,`status`,`create_time`,`update_time` from `api` where `status` = 'ON' 	duration=42.0ms	caller=sqlx/stmt.go:274	trace=1518278a098544f0f176a2e46b3a5085	span=8222fcfe31119c82
2024-12-18T10:40:24.037+08:00	[34;1m info [0;22m	load api id:ctdd8m53sjtmnsd4svqg,name:sb1	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load ctdd8m53sjtmnsd4svqg role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load api id:ctdd8tl3sjtmnsd4svr0,name:sb2	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load ctdd8tl3sjtmnsd4svr0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load api id:ctddafd3sjtmte5cath0,name:sb3	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load ctddafd3sjtmte5cath0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load api id:ctdder53sjtn9c6t20j0,name:ÂèçÂèçÂ§çÂ§ç	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load ctdder53sjtn9c6t20j0 role chain success,json:{"metadata": {"nodes": [{"id": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"script": "return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 2051, "Indexes": null}}, {"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d", "type": "Success", "fromId": "start-4f69fc1f-15a0-428a-9d56-8c9a87168924"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-ea575b34-97de-4b5a-ab3b-58273743c63d"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load api id:ctdq5bj93hoh5bghs3sg,name:wyl-api	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load ctdq5bj93hoh5bghs3sg role chain success,json:{"metadata": {"nodes": [{"id": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}, {"id": "start-844e5a1f-89bb-4d98-895b-0e9bd0d34003", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\\"Accept\\\": \\\"application/json\\\",\\\"Content-Type\\\": \\\"application/json\\\"}\"}", "Str": "", "Type": 5, "Index": 1240, "Indexes": null}}, {"id": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "return { msg: msg, metadata: metadata, msgType: msgType };"}}], "connections": [{"toId": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b", "type": "Success", "fromId": "start-844e5a1f-89bb-4d98-895b-0e9bd0d34003"}, {"toId": "end-68abc394-0690-49b6-8f7f-446381ed98e9", "type": "Success", "fromId": "jsTransform-8fb0a09b-2385-4f66-b014-bea612c0468b"}]}, "ruleChain": {"id": "ctdbgr2flvkk9k4q7t7g"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.038+08:00	[34;1m info [0;22m	load api id:ctfvtb2flvkm3l6cbsh0,name:1111	caller=rulego/rule_server.go:92
2024-12-18T10:40:24.039+08:00	[34;1m info [0;22m	load ctfvtb2flvkm3l6cbsh0 role chain success,json:{"metadata": {"nodes": [{"id": "start-0fdcf3ed-24f9-45b9-9852-328bf59dfa84", "name": "ÂºÄÂßãüòÑ", "type": "start", "configuration": {"Num": 0, "Raw": "{\"param\": \"{\\n  \\\"list\\\": [\\n    {\\n      \\\"name\\\": \\\"test1\\\",\\n      \\\"age\\\": 18\\n    },\\n    {\\n      \\\"name\\\": \\\"test2\\\",\\n      \\\"age\\\": 13\\n    },\\n    {\\n      \\\"name\\\": \\\"test3\\\",\\n      \\\"age\\\": 19\\n    },\\n    {\\n      \\\"name\\\": \\\"test4\\\",\\n      \\\"age\\\": 29\\n    },\\n    {\\n      \\\"name\\\": \\\"test5\\\",\\n      \\\"age\\\": 26\\n    },\\n    {\\n      \\\"name\\\": \\\"test6\\\",\\n      \\\"age\\\": 23\\n    }\\n  ]\\n}\"}", "Str": "", "Type": 5, "Index": 1483, "Indexes": null}}, {"id": "for-d96dd814-7702-4a38-99d4-730a2391cbf7", "name": "Ëø≠‰ª£", "type": "for", "configuration": {"do": "jsTransform-cf2a0cc9-8cf4-40c3-a5c5-c7dd0a1dbbcf", "mode": 1, "range": "msg.list"}}, {"id": "jsTransform-cf2a0cc9-8cf4-40c3-a5c5-c7dd0a1dbbcf", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "msg.name = msg.name + '-Ëø≠‰ª£'\n  msg.age = msg.age + 2\n  return { msg: msg, metadata: metadata, msgType: msgType };"}}, {"id": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f", "name": "‰ª£Á†ÅÊâßË°åüíª", "type": "jsTransform", "configuration": {"jsScript": "const aggregatedData = {\n    age: 0,\n    names: [],\n    count: 0,\n  };\n\n  // ÈÅçÂéÜ msg Êï∞ÁªÑ\n  msg.forEach((item) => {\n    const data = item // Ëé∑ÂèñÂÖ∑‰ΩìÁöÑÊï∞ÊçÆ\n\n    // ËÅöÂêàÂπ¥ÈæÑ\n    aggregatedData.age += data.age;\n\n    // Êî∂ÈõÜÂêçÂ≠ó\n    aggregatedData.names.push(data.name);\n\n    // ËÆ°Êï∞\n    aggregatedData.count++;\n  });\n\n  // ËÆ°ÁÆóÂπ≥ÂùáÂπ¥ÈæÑ\n  const averageAge =\n    aggregatedData.count > 0 ? aggregatedData.age / aggregatedData.count : 0;\n\n  const resultMsg = {\n    original: msg,\n    averageAge: averageAge,\n    names: aggregatedData.names,\n    totalCount: aggregatedData.count,\n  };\n  return { msg: resultMsg, metadata: metadata, msgType: msgType };"}}, {"id": "end-00cda001-3a81-45e7-95c4-d654649370c1", "name": "ÁªìÊùüü©∑", "type": "end", "configuration": {}}], "connections": [{"toId": "for-d96dd814-7702-4a38-99d4-730a2391cbf7", "type": "Success", "fromId": "start-0fdcf3ed-24f9-45b9-9852-328bf59dfa84"}, {"toId": "", "type": "", "fromId": ""}, {"toId": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f", "type": "Success", "fromId": "for-d96dd814-7702-4a38-99d4-730a2391cbf7"}, {"toId": "end-00cda001-3a81-45e7-95c4-d654649370c1", "type": "Success", "fromId": "jsTransform-d70bb5a3-9e19-4272-90e3-1f94c066907f"}], "firstNodeIndex": 0}, "ruleChain": {"id": "ctfu27r93hom0rlu5bqg"}} 
	caller=rulego/rule_chain.go:79
2024-12-18T10:40:24.039+08:00	[34;1m info [0;22m	init role server load api complete : 6	caller=rulego/rule_server.go:95
2024-12-18T10:40:24.039+08:00	[34;1m info [0;22m	init mysql lock	caller=locks/locks.go:30
2024-12-18T10:40:24.039+08:00	[34;1m info [0;22m	initialize servicecheck	caller=corn/scheduler.go:30
2024-12-18T10:40:24.039+08:00	[34;1m info [0;22m	initialize servicecheck	caller=corn/scheduler.go:20
2024-12-18T10:40:24.073+08:00	[34;1m info [0;22m	sql query: SELECT `id`,`type`,`config`,`switch`,`hash`,`status`,`create_time`,`update_time`,`name` FROM `datasource` WHERE switch = 1	span=8e5978e08785d46a	duration=34.1ms	caller=sqlx/stmt.go:274	trace=874a1a9ee672cad171fd740708333b61
2024-12-18T10:40:24.176+08:00	[34;1m info [0;22m	datasource init: &{Id:25 Type:mysql Config:{"host": "10.99.43.9", "port": 3306, "user": "root", "database": "workflow", "password": "Root@123"} Switch:1 Hash:663059dff2add3ddc458f2a668dd5c9a Status:connected CreateTime:2024-12-17 18:46:01 +0800 CST UpdateTime:2024-12-17 18:46:01 +0800 CST Name:test-1}	caller=datasource/datasouce.go:45
2024-12-18T10:40:24.215+08:00	[34;1m info [0;22m	sql exec: update `datasource` set status = 'connected' where id = 25	duration=39.5ms	caller=sqlx/stmt.go:274	trace=9f52a15776c1fe507dccc40340a48c4d	span=e105b54d2e46d87f
2024-12-18T10:40:24.215+08:00	[34;1m info [0;22m	datasource init success: 1, failed: 0	caller=datasource/datasouce.go:67
2024-12-18T10:40:28.195+08:00	[34;1m info [0;22m	Got signal 2, shutting down...	caller=proc/shutdown.go:58
